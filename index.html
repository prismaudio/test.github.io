<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRISMAUDIO: DECOMPOSED CHAIN-OF-THOUGHTS AND MULTI-DIMENSIONAL REWARDS FOR VIDEO-TO-AUDIO GENERATION</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Nunito:wght@300;400;500;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap'); /* Font for Carousel */

        :root {
            --primary-color: #4A90E2; /* Professional Blue */
            --secondary-color: #50E3C2; /* Bright Teal for accents */
            --text-color: #333333; /* Dark Grey for readability */
            --light-text-color: #7A7A7A; /* Softer grey for subtext */
            --background-color: #FFFFFF; /* Clean White */
            --card-background: #FDFDFD; /* Almost white for subtle depth */
            --border-radius: 16px; /* Increased for a rounder look */
            --shadow-light: 0 5px 20px rgba(0, 0, 0, 0.07);
            --shadow-hover: 0 8px 30px rgba(0, 0, 0, 0.12);
            --light-tint: #F4F8FC; /* Very light blue tint */
            --border-color: #EAEAEA;
        }

        body {
            font-family: 'Nunito', sans-serif; /* Switched to a rounder font */
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.7;
            scroll-behavior: smooth;
            text-align: center;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 50px 20px;
        }

        h1 {
            font-family: 'Montserrat', sans-serif; /* Switched to a modern, rounded heading font */
            font-size: 5.5em; /* Adjusted size for the new font */
            color: var(--primary-color);
            font-weight: 700;
            margin: 0;
            letter-spacing: 1px;
            text-align: center;
        }

        h2 {
            font-family: 'Montserrat', sans-serif; /* Consistent heading font */
            font-size: 2.5em;
            color: var(--text-color);
            font-weight: 700;
            margin-top: 70px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            padding-bottom: 20px;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        h3 {
            font-family: 'Montserrat', sans-serif; /* Consistent heading font */
            font-size: 1.6em;
            color: var(--primary-color);
            font-weight: 700;
            margin-top: 40px;
            margin-bottom: 15px;
        }

        .subtitle {
            font-family: 'Nunito', sans-serif;
            font-size: 1.6em;
            color: var(--light-text-color);
            font-weight: 400;
            margin-top: 10px;
            text-align: center;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        header {
            text-align: center;
            padding: 80px 0;
            background-color: var(--light-tint);
        }

        p.abstract-text {
            max-width: 1220px;
            margin: 30px calc(50% - 610px); /* 610 = 1220 / 2 */
            padding: 40px;
            font-size: 1.2em;
            color: var(--text-color);
            background-color: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        #advantage img {
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-light);
            border-radius: var(--border-radius);
            transition: transform 0.3s ease-in-out;
        }

        #advantage img:hover {
            transform: scale(1.02);
        }

        .demo-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .demo-preview-card {
            background: var(--background-color);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            text-align: center;
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .demo-preview-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .preview-media {
            width: 100%;
            height: 150px;
            background-color: var(--light-tint);
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: var(--primary-color);
            border: 2px dashed var(--primary-color);
            font-size: 1.5em;
            transition: background-color 0.3s, color 0.3s;
        }

        .demo-preview-card:hover .preview-media {
            background-color: var(--primary-color);
            color: white;
        }

        .demo-preview-card > p {
            font-size: 1.1em;
            font-weight: 500;
            color: var(--text-color);
            margin-top: auto;
        }

        .results-section {
            padding: 40px;
            background-color: var(--light-tint);
            border-radius: var(--border-radius);
            margin-top: 60px;
        }
        
        .ablation-header-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            text-align: center;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: 15px;
            padding: 0 10px;
        }

        .ablation-header-cell {
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .ablation-row {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            align-items: center;
            margin-bottom: 20px;
            padding: 20px 10px;
            border-radius: var(--border-radius);
            background: rgba(255,255,255,0.5);
            transition: background 0.3s;
        }

        .ablation-row:hover {
            background: rgba(255,255,255,1);
        }
        
        .ablation-row-label {
            font-weight: 500;
            text-align: center;
            padding-right: 20px;
            font-size: 1.1em;
            display: none; 
        }

        .ablation-video-grid {
            display: contents; 
        }
        
        .ablation-video-placeholder {
            position: relative;
            cursor: pointer;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .ablation-video-placeholder:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-hover);
        }

        .ablation-video-placeholder img {
            display: block;
            width: 100%;
            height: auto;
        }

        .ablation-video-placeholder .play-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            color: white;
            opacity: 0.8;
            text-shadow: 0 0 15px rgba(0,0,0,0.7);
            transition: opacity 0.3s, transform 0.3s;
        }
        
        .ablation-video-placeholder:hover .play-icon {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.1);
        }

        footer {
            text-align: center;
            padding: 50px 0;
            margin-top: 60px;
            color: var(--light-text-color);
            font-size: 0.9em;
            background-color: #F9F9F9;
        }

        hr {
            border: none;
            border-top: 1px solid var(--border-color);
            margin: 80px 0;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: var(--background-color);
            margin: auto;
            padding: 40px;
            border: none;
            width: 85%;
            max-width: 1200px;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            animation: slideIn 0.4s ease-out;
        }
        
        #ablationModal .modal-content {
             max-width: 900px;
             padding: 20px;
        }
        #ablationVideoPlayer {
            width: 100%;
            border-radius: 12px;
            max-height: 80vh;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close-btn {
            color: #AAA;
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 30px;
            font-weight: bold;
            transition: color 0.3s;
            z-index: 10;
        }
        #ablationModal .close-btn {
            top: -35px;
            right: 0;
            color: white;
            opacity: 0.8;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: var(--secondary-color);
            text-decoration: none;
            cursor: pointer;
        }
        
        #modal-title {
            text-align: left;
            padding-bottom: 15px;
            margin-top: 0;
        }
        #modal-title::after {
            left: 0;
            transform: none;
        }

        .full-media-placeholder {
            background-color: #F0F0F0;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            padding: 20px;
            font-size: 1em;
            text-align: center;
            color: var(--text-color);
        }

        .cot-box {
            background-color: var(--light-tint);
            padding: 25px;
            border-radius: var(--border-radius);
            border-left: 5px solid var(--secondary-color);
            margin-bottom: 40px;
        }

        .cot-box h3 {
            border-left: none;
            padding-left: 0;
            margin-top: 0;
        }

        .cot-box p {
            font-style: italic;
            color: var(--text-color);
            font-size: 1.05em;
        }

        /* --- START: MIGRATED CAROUSEL STYLES --- */
        .carousel-container {
            width: 100%;
            max-width: 1200px; /* 新增：限制最大寬度 */
            margin: 0 auto;     /* 新增：使整個容器水平置中 */
            padding: 40px 20px; /* 修改：左右增加 20px 的內距，避免貼邊 */
            user-select: none;
            box-sizing: border-box; /* 新增：確保 padding 不會影響總寬度 */
        }

        #carousel {
            display: flex;
            padding: 20px calc(50% - 180px);
            overflow: hidden;
            position: relative; /* 新增：修正 JS 計算位置的基準點 */
        }

        .video-card {
            flex: 0 0 360px;
            height: 240px;
            margin: 0 20px;
            overflow: hidden;
            position: relative;
            border-radius: 10px;
            border: 5px solid rgba(68, 102, 170, 0.3);
            transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .video-card video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        #carousel.dragging {
            cursor: grabbing;
            scroll-behavior: auto;
        }
        /* --- END: MIGRATED CAROUSEL STYLES --- */


        @media (max-width: 992px) {
            h1 { font-size: 4em; }
            h2 { font-size: 2em; }
            .modal-content { width: 90%; margin: 10% auto; padding: 30px; }

            .ablation-header-grid { display: none; }
            .ablation-row {
                grid-template-columns: 1fr; 
                gap: 15px;
                padding: 15px;
                margin-bottom: 30px;
                border: 1px solid var(--border-color);
            }
            .ablation-row-label {
                 display: block; 
                 border-bottom: 2px solid var(--secondary-color);
                 padding-bottom: 10px;
                 margin-bottom: 10px;
            }
            .ablation-video-grid {
                 display: grid;
                 grid-template-columns: repeat(3, 1fr); 
                 gap: 10px;
            }
        }

        @media (max-width: 576px) {
            h1 { font-size: 3em; }
            .subtitle { font-size: 1em; }
            h2 { font-size: 1.8em; }
            .demo-preview-grid {
                grid-template-columns: 1fr;
            }
            .container {
                padding: 30px 15px;
            }
            .modal-content { padding: 20px; }
            .ablation-video-grid {
                 grid-template-columns: repeat(2, 1fr); 
                 gap: 10px;
            }
        }
    </style>
</head>
<body>

    <header>
        <div class="container">
            <h1>PRISMAUDIO</h1>
            <div class="subtitle">
                Decomposed Chain-of-Thoughts and Multi-Dimensional Rewards for Video-to-Audio Generation
            </div>
        </div>
    </header>

    <div class="carousel-container">
        <strong style="text-align: center; max-width: 1200px; font-family: 'Quicksand', sans-serif; font-size: 19px; display: block; margin: 0 auto 20px; color: #344055;">
            Tap a video to start or stop.
        </strong>
        <div id="carousel">
            </div>
    </div>
    <div class="container">
        
        <section id="abstract">
            <h2>Abstract</h2>
            <p class="abstract-text" style="text-align: left;">
                Video-to-Audio (V2A) generation requires balancing four critical perceptual dimensions: semantic consistency, audio-visual temporal synchrony, aesthetic quality, and spatial accuracy; yet existing methods suffer from objective entanglement that conflates competing goals in single loss functions and lack human preference alignment. We introduce PrismAudio, the first framework to integrate Reinforcement Learning into V2A generation with specialized Chain-of-Thought (CoT) planning. Our approach decomposes monolithic reasoning into four specialized CoT modules (Semantic, Temporal, Aesthetic, and Spatial CoT), each paired with targeted reward functions. This CoT-reward correspondence enables multidimensional RL optimization that guides the model to jointly generate better reasoning across all perspectives, solving the objective entanglement problem while preserving interpretability. To make this optimization computationally practical, we propose Fast-GRPO, which employs hybrid ODE-SDE sampling that dramatically reduces the training overhead compared to existing GRPO implementations. We also introduce AudioCanvas, a rigorous benchmark that is more distributionally balanced and covers more realistically diverse and challenging scenarios than existing datasets, with 300 single-event classes and 501 multi-event samples. Experimental results demonstrate that PrismAudio achieves state-of-the-art performance across all four perceptual dimensions on both the in-domain VGGSound test set and out-of-domain AudioCanvas benchmark. 
            </p>
        </section>
        
        <hr>

        <section id="advantage">
            <h2>The PRISMAUDIO Architecture</h2>
            <img src="fig/fig2_model.png" alt="PrismAudio illustration" width="100%" style="max-width:1200px; display:block; margin:40px auto;" />
        </section>

        <hr>

        <section id="simple-demos">
            <h2>Demos: Single-Event Scenarios</h2>
            <p style="text-align: center; margin-bottom: 40px; color: var(--light-text-color); font-style: italic;">Click any card below to load the full high-fidelity comparison and Decomposed Chain-of-Thought analysis for that scene.</p>

            <div class="demo-preview-grid">
                <div class="demo-preview-card" onclick="openModal('case-01')">
                    <div class="preview-media"><p>Case #01</p></div>
                    <p>Chopping and Sizzling</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-02')">
                    <div class="preview-media"><p>Case #02</p></div>
                    <p>Hammering a Nail</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-03')">
                    <div class="preview-media"><p>Case #03</p></div>
                    <p>Car Horn + Rain</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-04')">
                    <div class="preview-media"><p>Case #04</p></div>
                    <p>Wind in the Forest</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-05')">
                    <div class="preview-media"><p>Case #05</p></div>
                    <p>Dog jumping in pool</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-06')">
                    <div class="preview-media"><p>Case #06</p></div>
                    <p>Person talking indoors</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-07')">
                    <div class="preview-media"><p>Case #07</p></div>
                    <p>Clock ticking and chimes</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-08')">
                    <div class="preview-media"><p>Case #08</p></div>
                    <p>Dragging a wooden box</p>
                </div>
            </div>
        </section>
        
        <hr>

        <section id="hard-demos">
            <h2>Demos: Multi-Event Scenarios</h2>
            <p style="text-align: center; margin-bottom: 40px; color: var(--light-text-color); font-style: italic;">Click any card below to load the full high-fidelity comparison and Decomposed Chain-of-Thought analysis for that scene.</p>

             <div class="demo-preview-grid">
                <div class="demo-preview-card" onclick="openModal('case-01')">
                    <div class="preview-media"><p>Case #01</p></div>
                    <p>Chopping and Sizzling</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-02')">
                    <div class="preview-media"><p>Case #02</p></div>
                    <p>Hammering a Nail</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-03')">
                    <div class="preview-media"><p>Case #03</p></div>
                    <p>Car Horn + Rain</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-04')">
                    <div class="preview-media"><p>Case #04</p></div>
                    <p>Wind in the Forest</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-05')">
                    <div class="preview-media"><p>Case #05</p></div>
                    <p>Dog jumping in pool</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-06')">
                    <div class="preview-media"><p>Case #06</p></div>
                    <p>Person talking indoors</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-07')">
                    <div class="preview-media"><p>Case #07</p></div>
                    <p>Clock ticking and chimes</p>
                </div>
                <div class="demo-preview-card" onclick="openModal('case-08')">
                    <div class="preview-media"><p>Case #08</p></div>
                    <p>Dragging a wooden box</p>
                </div>
            </div>
        </section>

        <hr>

        <section id="results" class="results-section">
            <h2>Ablation Study</h2>
            <p style="text-align: center; color: var(--light-text-color); font-style: italic; max-width: 700px; margin: -10px auto 40px auto;">Examining the impact of individual Chain-of-Thought modules and the power of their multi-dimensional combination.</p>
            
            <div class="ablation-header-grid">
                <div class="ablation-header-cell">Semantic Only</div>
                <div class="ablation-header-cell">Temporal Only</div>
                <div class="ablation-header-cell">Aesthetic Only</div>
                <div class="ablation-header-cell">Spatial Only</div>
                <div class="ablation-header-cell">Multi-dimensional</div>
            </div>

            <div id="ablation-grid-container"></div>
            
        </section>
    </div>

    <div id="demoModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2 id="modal-title">Full Case Study: Title Placeholder</h2>
            
            <div class="cot-box">
                <h3>Decomposed Chain-of-Thought Analysis</h3>
                <p id="modal-description">Description placeholder.</p>
            </div>

            <h3>Comparison Media</h3>
            <div class="demo-preview-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                <div id="media-1" class="full-media-placeholder"></div>
                <div id="media-2" class="full-media-placeholder"></div>
                <div id="media-3" class="full-media-placeholder"></div>
                <div id="media-4" class="full-media-placeholder"></div>
            </div>
        </div>
    </div>
    
    <div id="ablationModal" class="modal" onclick="closeAblationModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
             <span class="close-btn" onclick="closeAblationModal()">&times;</span>
             <video id="ablationVideoPlayer" controls autoplay muted playsinline>
                 Your browser does not support the video tag.
             </video>
        </div>
    </div>

    <footer>
        <div class="container">
           <p>&copy; 2025 PRISMAUDIO Project. All Rights Reserved.</p>
        </div>
    </footer>
    
    <script>
        // --- SCRIPT FOR ABLATION STUDY GRID ---
        const ablationModal = document.getElementById('ablationModal');
        const ablationVideoPlayer = document.getElementById('ablationVideoPlayer');

        const ablationCases = [
            { id: '01', name: 'Chopping and Sizzling' },
            { id: '02', name: 'Hammering a Nail' },
            { id: '03', name: 'Car Horn + Rain' }
        ];
        const ablationTypes = ['semantic', 'temporal', 'aesthetic', 'spatial', 'multidimensional'];
        
        const gridContainer = document.getElementById('ablation-grid-container');
        
        function createAblationGrid() {
            if (!gridContainer) return;
            let html = '';
            ablationCases.forEach(caseInfo => {
                 html += `<div class="ablation-row">`;
                 html += `<div class="ablation-row-label">Case #${caseInfo.id}: ${caseInfo.name}</div>`;
                 html += `<div class="ablation-video-grid">`;
                 ablationTypes.forEach(type => {
                    const videoPath = `media/ablation/${type}/case_${caseInfo.id}.mp4`;
                    const imagePath = `media/ablation/placeholder.jpg`; 
                    html += `
                        <div class="ablation-video-placeholder" onclick="openAblationModal('${videoPath}')">
                            <img src="${imagePath}" alt="${type} model for ${caseInfo.name}">
                            <div class="play-icon">&#9658;</div>
                        </div>
                    `;
                 });
                 html += `</div></div>`;
            });
            gridContainer.innerHTML = html;
        }

        function openAblationModal(videoSrc) {
            ablationVideoPlayer.src = videoSrc;
            ablationModal.style.display = "flex";
            ablationVideoPlayer.play();
        }

        function closeAblationModal() {
            ablationModal.style.display = "none";
            ablationVideoPlayer.pause();
            ablationVideoPlayer.src = ""; 
        }
        
        createAblationGrid();

        // --- SCRIPT FOR GENERAL DEMOS ---
        const demoModal = document.getElementById('demoModal');
        const modalTitle = document.getElementById('modal-title');
        const modalDescription = document.getElementById('modal-description');
        
        function loadCaseData(caseId) {
            const cases = {
                'case-01': {
                    title: 'Complex Activity: Chopping and Sizzling',
                    description: 'The video shows rapid chopping (high frequency events) followed by the immediate drop of food onto a hot pan (continuous sizzling). The Decomposed CoT system was crucial here for generating the overlapping, simultaneous sounds correctly—specifically, the Temporal CoT ensuring alignment and the Semantic CoT differentiating the two sounds. Baseline models typically merge this into a single, generic "cooking" sound.',
                    media: [
                        { title: 'Ground Truth', url: 'media/case01/video_input.mp4', preview: 'media/case01/video_input_preview.jpg', type: 'video' },
                        { title: 'PRISMAUDIO', url: 'media/case01/prismaudio_output.mp4', preview: null, type: 'video' },
                        { title: 'ThinkSound', url: 'media/case01/baseline1.mp4', preview: null, type: 'video' },
                        { title: 'MMAudio', url: 'media/case01/baseline2.mp4', preview: null, type: 'video' }
                    ]
                },
                'case-02': {
                    title: 'Precise Impact: Hammering a Nail',
                    description: 'This case challenges the model\'s Temporal Synchrony and Aesthetic Quality. The Spatial CoT determines the closeness (loudness) and the Temporal CoT ensures the hammer strike sound aligns perfectly with the visual impact frame. Previous models often introduce a noticeable audio delay or a muffled, generic impact sound.',
                    media: [
                        { title: 'Ground Truth', url: 'media/case02/video_input.mp4', preview: 'media/case02/video_input_preview.jpg', type: 'video' },
                        { title: 'PRISMAUDIO', url: 'media/case02/prismaudio_output.mp4', preview: null, type: 'video' },
                        { title: 'ThinkSound', url: 'media/case02/baseline1.mp4', preview: null, type: 'video' },
                        { title: 'MMAudio', url: 'media/case02/baseline2.mp4', preview: null, type: 'video' }
                    ]
                },
                'case-03': {
                    title: 'Dual Events: Car Horn + Rain',
                    description: 'A classic multi-event scenario requiring Semantic CoT (identifying both car and rain) and Spatial CoT (positioning the horn in the foreground and the rain as background ambiance). PrismAudio\'s multi-dimensional reward system prevents the loud horn from drowning out the background rain, achieving a natural audio mix.',
                    media: [
                        { title: 'Ground Truth', url: 'media/case03/video_input.mp4', preview: 'media/case03/video_input_preview.jpg', type: 'video' },
                        { title: 'PRISMAUDIO', url: 'media/case03/prismaudio_output.mp4', preview: null, type: 'video' },
                        { title: 'ThinkSound', url: 'media/case03/baseline1.mp4', preview: null, type: 'video' },
                        { title: 'MMAudio', url: 'media/case03/baseline2.mp4', preview: null, type: 'video' }
                    ]
                },
                default: { 
                    title: 'Case Data Not Found (ID: ' + caseId + ')', 
                    description: 'Error loading case details. Please check the case ID. This is a placeholder for the Decomposed Chain-of-Thought analysis.', 
                    media: [] 
                }
            };

            const createMediaHTML = (data) => {
                let mediaTag = '';
                const titleHTML = `<div style="font-family: 'Nunito', sans-serif; font-weight: 500; color: var(--text-color); margin-bottom: 10px;">${data.title}</div>`;

                if (data.type === 'video') {
                    mediaTag = `<video controls width="100%" poster="${data.preview || ''}" src="${data.url}" style="width:100%; border-radius: 12px; background-color: black;"><p>Your browser does not support the video tag.</p></video>`;
                } else if (data.type === 'audio') {
                    mediaTag = `<audio controls src="${data.url}" style="width: 100%;"><p>Your browser does not support the audio element.</p></audio>`;
                } else {
                    return '<p style="color: red;">Invalid media type.</p>';
                }
                return titleHTML + mediaTag;
            };

            const data = cases[caseId] || cases['default'];

            modalTitle.textContent = `Full Case Study: ${data.title}`;
            modalDescription.textContent = data.description;
            
            data.media.forEach((item, index) => {
                const mediaId = `media-${index + 1}`;
                const mediaContainer = document.getElementById(mediaId);
                
                if (mediaContainer) {
                    mediaContainer.innerHTML = createMediaHTML(item);
                    mediaContainer.style.minHeight = 'auto'; 
                    mediaContainer.style.display = 'block';
                    const player = mediaContainer.querySelector('video, audio');
                    if (player) player.load();
                }
            });
        }

        function openModal(caseId) {
            loadCaseData(caseId);
            demoModal.style.display = "flex";
        }

        function closeModal() {
            demoModal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == demoModal) {
                closeModal();
            }
            if (event.target == ablationModal) {
                closeAblationModal();
            }
        }
    </script>

    <script>
        const videoPaths = [
            "https://github.com/user-attachments/assets/1.mp4",
            "https://github.com/user-attachments/assets/2.mp4",
            "https://github.com/user-attachments/assets/3.mp4",
            "https://github.com/user-attachments/assets/4.mp4",
            "https://github.com/user-attachments/assets/5.mp4",
        ];

        const carousel = document.getElementById('carousel');
        const N = videoPaths.length;

        function createVideoCard(src) {
            const container = document.createElement('div');
            container.className = 'video-card';
            container.style.position = 'relative';

            const video = document.createElement('video');
            video.src = src;
            video.setAttribute('playsinline', '');
            video.style.width = '100%';
            video.style.borderRadius = '10px';
            video.style.cursor = 'pointer';
            video.style.backgroundColor = '#000';

            // 点击切换播放/暂停
            video.addEventListener('click', () => {
                if (video.paused) {
                    video.play().catch(e => console.warn("Play error:", e));
                } else {
                    video.pause();
                }
            });

            container.appendChild(video);
            return container;
        }

        // 构建无限轮播
        const allCards = [];
        for (let r = 0; r < 3; r++) {
            videoPaths.forEach(src => allCards.push(createVideoCard(src)));
        }
        allCards.forEach(card => carousel.appendChild(card));

        let sectionWidth;

        function setupCarousel() {
            const cardWidth = carousel.children[0].offsetWidth;
            const style = getComputedStyle(carousel.children[0]);
            const gap = parseInt(style.marginRight) + parseInt(style.marginLeft);
            sectionWidth = N * (cardWidth + gap);

            // 初始位置在中间组
            carousel.scrollLeft = sectionWidth;

            // 无限循环逻辑
            carousel.addEventListener('scroll', () => {
                if (carousel.scrollLeft >= sectionWidth * 2) {
                    carousel.scrollLeft -= sectionWidth;
                } else if (carousel.scrollLeft <= 0) {
                    carousel.scrollLeft += sectionWidth;
                }
            });
        }

        setTimeout(() => {
            setupCarousel();

            // 视觉缩放效果
            const updateScales = () => {
                const containerCenter = carousel.scrollLeft + carousel.parentElement.offsetWidth / 2;
                Array.from(carousel.children).forEach(card => {
                    const cardCenter = card.offsetLeft + card.offsetWidth / 2;
                    const positionRatio = (cardCenter - containerCenter) / (carousel.offsetWidth * 0.8);
                    const scale = 0.89 + 0.27 * Math.cos(positionRatio * Math.PI);
                    card.style.transform = `scale(${scale})`;
                    card.style.opacity = 0.8 + 0.2 * (1 - Math.abs(positionRatio));
                });
                requestAnimationFrame(updateScales);
            };
            updateScales();
        }, 100);

        // 鼠标拖拽滚动
        let isDragging = false;
        let startX;
        let scrollLeft;

        carousel.addEventListener('mousedown', (e) => {
            isDragging = true;
            startX = e.pageX - carousel.offsetLeft;
            scrollLeft = carousel.scrollLeft;
            carousel.classList.add('dragging');
        });

        carousel.addEventListener('mouseleave', () => {
            isDragging = false;
            carousel.classList.remove('dragging');
        });

        carousel.addEventListener('mouseup', () => {
            isDragging = false;
            carousel.classList.remove('dragging');
        });

        carousel.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
            const x = e.pageX - carousel.offsetLeft;
            const walk = (x - startX) * 1.5;
            carousel.scrollLeft = scrollLeft - walk;
        });
    </script>

    </body>
</html>
